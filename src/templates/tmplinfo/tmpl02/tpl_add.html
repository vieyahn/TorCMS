{% extends "../tmplinfo.html" %}

{% block headinfo %}
<title>地球系统科学数据共享网</title>
<meta name="keywords" content="地球系统科学数据共享网">
<meta name="description" content="地球系统科学数据共享网">
<script src="{{ static_url('jslib/codemirror-5.6/lib/codemirror.js') }}"></script>
<script src="{{ static_url('jslib/codemirror-5.6/addon/edit/continuelist.js') }}"></script>
<script src="{{ static_url('jslib/codemirror-5.6/mode/xml/xml.js') }}"></script>
<script src="{{ static_url('jslib/codemirror-5.6/mode/markdown/markdown.js') }}"></script>
<link rel="stylesheet" href="{{ static_url('jslib/codemirror-5.6/lib/codemirror.css') }}">

<script type="text/javascript">
    $(document).ready(function () {
        var editor = CodeMirror.fromTextArea(document.getElementById("cnt_md"), {
            lineWrapping: true,
            mode: 'markdown',
            lineNumbers: true,
            theme: "default",
            extraKeys: {"Enter": "newlineAndIndentContinueMarkdownList"}
        });
    });
</script>


<style type="text/css">
    .CodeMirror {
        border-top: 1px solid #666;
        border-bottom: 1px solid #666;
    }

    .cm-s-default .cm-trailing-space-a:before,
    .cm-s-default .cm-trailing-space-b:before {
        position: absolute;
        content: "\00B7";
        color: #777;
    }

    .cm-s-default .cm-trailing-space-new-line:before {
        position: absolute;
        content: "\21B5";
        color: #777;
    }
</style>

<script type="text/javascript" src="{{ static_url('jslib/validate/jquery.validate.min.js') }}"></script>
<script type="text/javascript" src="{{ static_url('jslib/validate/message_cn.js') }}"></script>

<script type="text/javascript">

    jQuery.validator.addMethod("isMobile", function (value, element) {
        var length = value.length;
        var mobile = /^(((13[0-9]{1})|(15[0-9]{1}))+\d{8})$/;
        return this.optional(element) || (length == 11 && mobile.test(value));
    }, "请正确填写您的手机号码");

    jQuery.validator.addMethod("isphone", function (value, element) {
        var length = value.length;
        var phone = /(^(\d{3,4}-)?\d{6,8}$)|(^(\d{3,4}-)?\d{6,8}(-\d{1,5})?$)|(\d{11})/;
        return this.optional(element) || (phone.test(value));
    }, "请填写正确的电话号码");

    $().ready(function () {
        $("#form_add_info").validate(
                {

                    errorPlacement: function (error, element) { //指定错误信息位置
                        if (element.is(':radio') || element.is(':checkbox')) { //如果是radio或checkbox
                            var eid = element.attr('name'); //获取元素的name属性
                            error.appendTo(element.parent()); //将错误信息添加当前元素的父结点后面
                        } else {
                            error.insertAfter(element);
                        }
                    }
                }
        );
    });

    // 提交预约刷新的动作
    function chuli_kw() {
        $.ajaxSetup({cache: false});
        // 预约刷新
        // 模拟Form提交
        var myVAriable = $("#keywords")[0].value;
        // alert(myVAriable);
        var stringArray = myVAriable.split(",");
        var out_str = '<span class="btn btn-warning btn-xs">';
        out_str += stringArray.join('</span> <span class="btn btn-warning btn-xs">');
        out_str += '</span';
        // alert(out_str);
        // $('#kwlist').html('');
        $('#kwlist').html(out_str);

    }

</script>


{% end %}


{% block typebody %}
<div class="panel panel-default" id="guarantee">

    <div class="alert alert-info">
        <div class="row">
            <div class="col-sm-3"> Current Location：<a href="/"> Home </a> ></div>
            <div class="col-sm-9"> {% module BreadcrumbPublish(2) %}</div>
        </div>
    </div>


    <div class="panel-body">

        <form class="form-horizontal" role="form" id="form_add_info" name="form_add_info" method="post"
              enctype="multipart/form-data" action="/meta/to_add">


            <input type='hidden' name="uid" value="{% raw kwd['uid'] %}">

            <input type='hidden' name="def_cat_uid" value="{% raw kwd['def_cat_uid'] %}">


            <input name="action" value="dopost" type="hidden">
            <input name="ismember" value="0" type="hidden">

            <input name="id" value="" type="hidden">
            <input name="mixcode" value="4c9734774f6b40682d35c0ccee0b0845" type="hidden">

            <div class="form-group">
                <label class="col-sm-2 control-label"> </label>

                <div class="col-sm-10">
                    <b> Basic data information : {{ kwd['parentname'] }} > {{ kwd['catname'] }}</b>
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-2 control-label">

                    <a class="glyphicon glyphicon-star" style="color: red;font-size: xx-small;"></a>
                    Title： </label>

                <div class="col-sm-10">
                    <input type="text" class="form-control" name="title" id="title">

                </div>
            </div>

            <div class="form-group">
                <label class="col-sm-2 control-label">

                    <a class="glyphicon glyphicon-star" style="color: red;font-size: xx-small;"></a>
                    tags ： </label>

                <div class="col-sm-10">
                    <input id="tags" name="tags" class="form-control">
                </div>
            </div>


            <div class="form-group">
                <label class="col-sm-2 control-label">

                    <a class="glyphicon glyphicon-star" style="color: red;font-size: xx-small;"></a>
                    Keywords (comma separated) ： </label>

                <div class="col-sm-10">
                    <input type="text" class="form-control" name="keywords" id="keywords" onkeyup="chuli_kw();">


                </div>
            </div>

            <div class="form-group">
                <label class="col-sm-2 control-label">

                </label>

                <div class="col-sm-10">
                    <p id="kwlist"></p>


                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-2 control-label">
                    <a class="glyphicon glyphicon-star" style="color: red;font-size: xx-small;" for="ext_logo"></a>
                    Picture </label>

                <div class="col-sm-10">
                    <input type="text" class="form-control" id="logo" name="logo">

                </div>
            </div>

            <div class="form-group">
                <label class="col-sm-2 control-label"> </label>

                <div class="col-sm-10">
                    <a href="/entry/add" target="_blank" class="contactbutton" role="button">Upload pictures </a>


                </div>
            </div>
            <div class="form-group">

                <label class="col-sm-2 control-label">

                    <a class="glyphicon glyphicon-star" style="color: red;font-size: xx-small;"></a>
                    cnt_md ：

                </label>

                <div class="col-sm-10">

                    <textarea class="form-control" rows=26 id="cnt_md" name="cnt_md" cols="100"></textarea>
                </div>
            </div>

            <hr/>

            {% block extrainfo %}{% end %}

            <hr/>


            <div class="form-group">
                <label class="col-sm-2 control-label"> </label>

                <div class="col-sm-10">
                    <input type="submit" name="post_submit" value="Submit" id="Button1"
                           class="btn btn-primary" role="button"/>

                </div>
            </div>


        </form>


    </div>
</div>


{% end %}
